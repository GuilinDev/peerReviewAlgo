### Linux 概述
1. Linux的基本组件
就像任何其他典型的操作系统一样，Linux拥有所有这些组件：内核，shell和GUI，系统实用程序和应用程序。Linux比其他操作系统更具优势的是每个方面都附带其他功能，所有代码都可以免费下载。
![Linux 体系结构](/imgs/linux0.png)
    * 用户空间(User Space) ：用户空间又包括用户的应用程序(User Applications)、C 库(C Library) 。
    * 内核空间(Kernel Space) ：内核空间又包括系统调用接口(System Call Interface)、内核(Kernel)、平台架构相关的代码(Architecture-Dependent Kernel Code) 。
    
为什么 Linux 体系结构要分为用户空间和内核空间的原因？

    * 现代 CPU 实现了不同的工作模式，不同模式下 CPU 可以执行的指令和访问的寄存器不同。
    * Linux 从 CPU 的角度出发，为了保护内核的安全，把系统分成了两部分。
用户空间和内核空间是程序执行的两种不同的状态，我们可以通过两种方式完成用户空间到内核空间的转移：1）系统调用；2）硬件中断。
    
2. Linux 使用的进程间通信方式？
* 管道(pipe)、流管道(s_pipe)、有名管道(FIFO)。
* 信号(signal) 。
* 消息队列。
* 共享内存。
* 信号量。
* 套接字(socket) 。

3. Linux 有哪些系统日志文件？
    比较重要的是 /var/log/messages 日志文件。
    > 该日志文件是许多进程日志文件的汇总，从该文件可以看出任何入侵企图或成功的入侵。另外，如果胖友的系统里有 ELK 日志集中收集，它也会被收集进去。

4. 什么是交换空间Swap Space？
    交换空间是Linux使用的一定空间，用于临时保存一些并发运行的程序。当RAM没有足够的内存来容纳正在执行的所有程序时，就会发生这种情况。

5. 什么是root账户？
    root帐户就像一个系统管理员帐户，允许你完全控制系统。你可以在此处创建和维护用户帐户，为每个帐户分配不同的权限。每次安装Linux时都是默认帐户。

6. 什么是LILO？ (Linux Loader - boot loader)
    LILO是Linux的引导加载程序。它主要用于将Linux操作系统加载到主内存中，以便它可以开始运行。

7. 什么是BASH？
    BASH是Bourne Again SHell的缩写。它由Steve Bourne编写，作为原始Bourne Shell（由/ bin / sh表示）的替代品。它结合了原始版本的Bourne Shell的所有功能，以及其他功能，使其更容易使用。从那以后，它已被改编为运行Linux的大多数系统的默认shell。

8. 什么是CLI？
    命令行界面（command-line interface，CLI）是在图形用户界面得到普及之前使用最为广泛的用户界面，它通常不支持鼠标，用户通过键盘输入指令，计算机接收到指令后，予以执行。也有人称之为字符用户界面（CUI）。
    
    通常认为，命令行界面（CLI）没有图形用户界面（GUI）那么方便用户操作。因为，命令行界面的软件通常需要用户记忆操作的命令，但是，由于其本身的特点，命令行界面要较图形用户界面节约计算机系统的资源。在熟记命令的前提下，使用命令行界面往往要较使用图形用户界面的操作速度要快。所以，图形用户界面的操作系统中，都保留着可选的命令行界面。

9. 什么是GUI？
    图形用户界面（Graphical User Interface，简称 GUI，又称图形用户接口）是指采用图形方式显示的计算机操作用户界面。

    图形用户界面是一种人与计算机通信的界面显示格式，允许用户使用鼠标等输入设备操纵屏幕上的图标或菜单选项，以选择命令、调用文件、启动程序或执行其它一些日常任务。与通过键盘输入文本或字符命令来完成例行任务的字符界面相比，图形用户界面有许多优点。

10. GNU项目的重要性是什么？
    这种所谓的自由软件运动具有多种优势，例如可以自由地运行程序以及根据你的需要自由学习和修改程序。它还允许你将软件副本重新分发给其他人，以及自由改进软件并将其发布给公众。

### Linux的磁盘，目录和文件
1. 简单 Linux 文件系统？
    在 Linux 操作系统中，所有被操作系统管理的资源，例如网络接口卡、磁盘驱动器、打印机、输入输出设备、普通文件或是目录都被看作是一个文件。

    也就是说在 Linux 系统中有一个重要的概念***：一切都是文件***。其实这是 Unix 哲学的一个体现，而 Linux 是重写 Unix 而来，所以这个概念也就传承了下来。在 Unix 系统中，把一切资源都看作是文件，包括硬件设备。UNIX系统把每个硬件都看成是一个文件，通常称为设备文件，这样用户就可以用读写文件的方式实现对硬件的访问。

Linux 支持 5 种文件类型，如下图所示：
![Linux 体系结构](/imgs/linux1.png)

2. Linux 的目录结构是怎样的？
> 这个问题，一般不会问。更多是实际使用时，需要知道。
![Linux 体系结构](/imgs/linux2.png)
常见目录说明：
* /bin： 存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里；
* /etc： 存放系统管理和配置文件；
* /home： 存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示；
* **/usr **： 用于存放系统应用程序；
* /opt： 额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把tomcat等都安装到这里；
* /proc： 虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息；
* /root： 超级用户（系统管理员）的主目录（特权阶级o）；
* /sbin: 存放二进制可执行文件，只有root才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如ifconfig等；
* /dev： 用于存放设备文件；
* /mnt： 系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统；
* /boot： 存放用于系统引导时使用的各种文件；
* **/lib **： 存放着和系统运行相关的库文件 ；
* /tmp： 用于存放各种临时文件，是公用的临时文件存储点；
* /var： 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等；
* /lost+found： 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里。

3. 什么是 inode ？
    > 一般来说，面试不会问 inode 。但是 inode 是一个重要概念，是理解 Unix/Linux 文件系统和硬盘储存的基础。
    
    理解inode，要从文件储存说起。

    文件储存在硬盘上，硬盘的最小存储单位叫做"扇区"（Sector）。每个扇区储存512字节（相当于0.5KB）。

    操作系统读取硬盘的时候，不会一个个扇区地读取，这样效率太低，而是一次性连续读取多个扇区，即一次性读取一个"块"（block）。这种由多个扇区组成的"块"，是文件存取的最小单位。"块"的大小，最常见的是4KB，即连续八个 sector组成一个 block。

    文件数据都储存在"块"中，那么很显然，我们还必须找到一个地方储存文件的元信息，比如文件的创建者、文件的创建日期、文件的大小等等。这种储存文件元信息的区域就叫做inode，中文译名为"索引节点"。

    每一个文件都有对应的inode，里面包含了与该文件有关的一些信息。

    简述 Linux 文件系统通过 i 节点把文件的逻辑结构和物理结构转换的工作过程？

    > 如果看的一脸懵逼，也没关系。一般来说，面试官不太会问这个题目。

    Linux 通过 inode 节点表将文件的逻辑结构和物理结构进行转换。

    * inode 节点是一个 64 字节长的表，表中包含了文件的相关信息，其中有文件的大小、文件所有者、文件的存取许可方式以及文件的类型等重要信息。在 inode 节点表中最重要的内容是磁盘地址表。在磁盘地址表中有 13 个块号，文件将以块号在磁盘地址表中出现的顺序依次读取相应的块。
    * Linux 文件系统通过把 inode 节点和文件名进行连接，当需要读取该文件时，文件系统在当前目录表中查找该文件名对应的项，由此得到该文件相对应的 inode 节点号，通过该 inode 节点的磁盘地址表把分散存放的文件物理块连接成文件的逻辑结构。

4. 什么是硬链接和软链接？
    1）硬链接 hard link

    由于 Linux 下的文件是通过索引节点(inode)来识别文件，硬链接可以认为是一个指针，指向文件索引节点的指针，系统并不为它重新分配 inode 。每添加一个一个硬链接，文件的链接数就加 1 。

    不足：1）不可以在不同文件系统的文件间建立链接；2）只有超级用户才可以为目录创建硬链接。
    2）软链接 soft link

    软链接克服了硬链接的不足，没有任何文件系统的限制，任何用户可以创建指向目录的符号链接。因而现在更为广泛使用，它具有更大的灵活性，甚至可以跨越不同机器、不同网络对文件进行链接。

    不足：因为链接文件包含有原文件的路径信息，所以当原文件从一个目录下移到其他目录中，再访问链接文件，系统就找不到了，而硬链接就没有这个缺陷，你想怎么移就怎么移；还有它要系统分配额外的空间用于建立新的索引节点和保存原文件的路径。
    
    实际场景下，基本是使用软链接。总结区别如下：

    * 硬链接不可以跨分区，软件链可以跨分区。
    * 硬链接指向一个 inode 节点，而软链接则是创建一个新的 inode 节点。
    * 删除硬链接文件，不会删除原文件，删除软链接文件，会把原文件删除。

5. RAID 是什么?
> RAID 全称为独立磁盘冗余阵列(Redundant Array of Independent Disks)，基本思想就是把多个相对便宜的硬盘组合起来，成为一个硬盘阵列组，使性能达到甚至超过一个价格昂贵、 容量巨大的硬盘。RAID 通常被用在服务器电脑上，使用完全相同的硬盘组成一个逻辑扇区，因此操作系统只会把它当做一个硬盘。RAID 分为不同的等级，各个不同的等级均在数据可靠性及读写性能上做了不同的权衡。在实际应用中，可以依据自己的实际需求选择不同的 RAID 方案。

 很多公司都使用云服务，大家很难接触到 RAID 这个概念，更多的可能是普通云盘、SSD 云盘酱紫的概念。
 
### Linux 安全
1. 一台 Linux 系统初始化环境后需要做一些什么安全工作？
    1. 添加普通用户登陆，禁止 root 用户登陆，更改 SSH 端口号。

    > 修改 SSH 端口不一定绝对哈。当然，如果要暴露在外网，建议改下。

    2. 服务器使用密钥登陆，禁止密码登陆。

    3. 开启防火墙，关闭 SElinux ，根据业务需求设置相应的防火墙规则。

    4. 装 fail2ban 这种防止 SSH 暴力破击的软件。

    5. 设置只允许公司办公网出口 IP 能登陆服务器(看公司实际需要)

    > 也可以安装 VPN 等软件，只允许连接 VPN 到服务器上。

    6. 修改历史命令记录的条数为 10 条。

    7. 只允许有需要的服务器可以访问外网，其它全部禁止。

    8. 做好软件层面的防护。
        8.1 设置 nginx_waf 模块防止 SQL 注入。
        8.2 把 Web 服务使用 www 用户启动，更改网站目录的所有者和所属组为 www 。
    
2. 什么叫 CC 攻击？什么叫 DDOS 攻击？
    > 攻击，即是通过大量合法的请求占用大量网络资源，以达到瘫痪网络的目的。
    * CC 攻击(Challenge Collapsar)，主要是用来攻击页面的，通过代理服务器或者大量肉鸡来模拟多个正常用户不停的对你的页面进行访问，从而使你的系统资源消耗殆尽。
    * DDOS 攻击 (Distributed Denial-of-service attack)，中文名叫分布式拒绝服务攻击，指借助服务器技术将多个计算机联合起来作为攻击平台，来对一个或多个目标发动 DDOS 攻击。
    
    **怎么预防 CC 攻击和 DDOS 攻击？**
    
    防 CC、DDOS 攻击，这些只能是用硬件防火墙做流量清洗，将攻击流量引入黑洞。
    > 流量清洗这一块，主要是买 ISP 服务商的防攻击的服务就可以，机房一般有空余流量，一般是买服务，毕竟攻击不会是持续长时间。
    
3. 什么是网站数据库注入？
    * 由于程序员的水平及经验参差不齐，大部分程序员在编写代码的时候，没有对用户输入数据的合法性进行判断。
    * 应用程序存在安全隐患。用户可以提交一段数据库查询代码，根据程序返回的结果，获得某些他想得知的数据，这就是所谓的 SQL 注入。
    * SQL注入，是从正常的 WWW 端口访问，而且表面看起来跟一般的 Web 页面访问没什么区别，如果管理员没查看日志的习惯，可能被入侵很长时间都不会发觉。
    
    **如何过滤与预防？**
    数据库网页端注入这种，可以考虑使用 nginx_waf 做过滤与预防
    
### Shell
> 这个了解即可，写的时候现查

[](https://blog.csdn.net/ThinkWon/article/details/104588679)
    